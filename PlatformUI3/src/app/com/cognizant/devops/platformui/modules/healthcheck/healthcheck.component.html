<!--
*******************************************************************************
 * Copyright 2017 Cognizant Technology Solutions
 * 
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License.  You may obtain a copy
 * of the License at
 * 
 *   http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 * License for the specific language governing permissions and limitations under
 * the License.
 ****************************************************************************** -->

  <div layout layout-align="left" class="titleStyle">
    <div  id="healthCheckTitle">Health Check </div>
  </div> 

 <!-- <div layout layout-align="left" class="titleStyle">
  <div  id="healthCheckTitle">Health Check | 
      <a id="agentTxt"  (click)="goToSection('agentTxt','agentsTable')" class="linkTxt"> Agents</a> |
      <a id="dataCompTxt" (click)="goToSection('dataCompTxt','dataComponentTable')" class="linkTxt"> Data Components</a> |
      <a id="servicesTxt" (click)="goToSection('servicesTxt','servicesTable')" class="linkTxt"> Services</a>
  </div>
</div> -->

<div class="orangeStripCss"></div>

<mat-tab-group color="primary" class="healthcheck-tab-style">
  <mat-tab label="Agents" class="healthcheck-tab-style">    
      <div layout layout-align="left" class="sectionHeadingStyle">
          <div layout>Agents</div>
        </div>
        
        <div id="agentsTable" layout-align="center center" class="tableContainerStyle" *ngIf="showContent">
          <!-- Insights Agents Table -->
          <table mat-table [dataSource]="agentDataSource">
            <!-- Category Column -->
            <ng-container matColumnDef="category">
              <th mat-header-cell *matHeaderCellDef class="tableHeaderCss"> Category </th>
              <td mat-cell *matCellDef="let element" style="width:200px !important"> {{element.category}} </td>
            </ng-container>
            <!-- Tool Column -->
            <ng-container matColumnDef="toolName">
              <th mat-header-cell *matHeaderCellDef class="tableHeaderCss"> Tool </th>
              <td mat-cell *matCellDef="let element"> {{element.toolName}} </td>
            </ng-container>
            <!-- Time Column -->
            <ng-container matColumnDef="inSightsTimeX">
              <th mat-header-cell *matHeaderCellDef class="tableHeaderCss"> Time </th>
              <td mat-cell *matCellDef="let element">{{element.inSightsTimeX | date:'yyyy-MM-dd HH:mm:ss'}}</td>
            </ng-container>
            <!-- Status Column -->
            <ng-container matColumnDef="status">
              <th mat-header-cell *matHeaderCellDef class="tableHeaderCss"> Status </th>
              <td mat-cell *matCellDef="let element">
                <mat-icon svgIcon="healthcheck_success_status" *ngIf="element.status =='success'" [ngStyle]="{color: '#00B140', height: '20px', width: '20px'}">
                </mat-icon>
                <mat-icon svgIcon="healthcheck_failure_status" *ngIf="element.status =='failure'" [ngStyle]="{color: '#FF8F1C', height: '20px', width: '20px'}">
                </mat-icon>
              </td>
            </ng-container>
            <!-- Details Column -->
            <ng-container matColumnDef="details">
              <th mat-header-cell *matHeaderCellDef class="tableHeaderCss"> Details </th>
              <td mat-cell *matCellDef="let element">
                <a (click)="showDetailsDialog(element.toolName,element.category)">
                  <mat-icon svgIcon="healthcheck_show_details" [ngStyle]="{color:'#5C068C', height: '20px', width: '20px'}">
                  </mat-icon>
                </a>
              </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedAgentColumns" class="tableHeaderCss"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedAgentColumns;"></tr>
          </table>
        </div>
        
        <!-- Displays Progress spinner and Error message for service failure-->
        <div *ngIf="showThrobber" style="display: flex; justify-content: center; align-items: center">
          <mat-progress-spinner color="primary" mode="indeterminate">
          </mat-progress-spinner>
        </div>
        <div *ngIf="!(showContent || showThrobber)" layout-align="center center" style="text-align: center;">
          <mat-icon svgIcon="healthcheck_failure_status" [ngStyle]="{color: '#FF8F1C', height: '25px', width: '25px'}">
          </mat-icon>
          Service Failure. Please try again.
        </div>
        
        <div layout layout-align="right" class="rightAlignStyle" *ngIf="agentBacktoTopFlag">
          <a (click)="goToHealthCheckTitle()">
            <mat-icon svgIcon="healthcheck_back_to_top" [ngStyle]="{height: '29px', width: '26px'}">
            </mat-icon>
          </a>
        </div>
    </mat-tab>
  <mat-tab label="Data Components" class="healthcheck-tab-style">
      <div layout layout-align="left" class="sectionHeadingStyle">
          <div layout>Data Components</div>
        </div>
        
        <div id="dataComponentTable" layout-align="center center" class="tableContainerStyle" *ngIf="showContent">
          <table mat-table [dataSource]="dataComponentDataSource"> 
            <!-- Server Column -->
            <ng-container matColumnDef="serverName">
              <th mat-header-cell *matHeaderCellDef class="tableHeaderCss">Name</th>
              <td mat-cell *matCellDef="let key" style="width:200px !important"> {{key.serverName}} </td>
            </ng-container>
        
            <!-- IP Address:Port Column -->
            <ng-container matColumnDef="ipAddress">
              <th mat-header-cell *matHeaderCellDef class="tableHeaderCss">IP Address:Port</th>
              <td mat-cell *matCellDef="let key"> {{key.endPoint}} </td>
            </ng-container>
        
            <!-- Version Column -->
            <ng-container matColumnDef="version">
              <th mat-header-cell *matHeaderCellDef class="tableHeaderCss">Version</th>
              <td mat-cell *matCellDef="let key"> {{key.version}} </td>
            </ng-container>
        
            <!-- Status Column -->
            <ng-container matColumnDef="status">
              <th mat-header-cell *matHeaderCellDef class="tableHeaderCss">Status</th>
              <td mat-cell *matCellDef="let key">
                <mat-icon svgIcon="healthcheck_success_status" *ngIf="key.status =='success'" [ngStyle]="{color: '#00B140', height: '20px', width: '20px'}">
                </mat-icon>
                <mat-icon svgIcon="healthcheck_failure_status" *ngIf="key.status =='failure'" [ngStyle]="{color: '#FF8F1C', height: '20px', width: '20px'}">
                </mat-icon>
              </td>
            </ng-container>
        
            <tr mat-header-row *matHeaderRowDef="dataComponentColumns" class="tableHeaderCss"></tr>
            <tr mat-row *matRowDef="let row; columns: dataComponentColumns;"></tr>
          </table>
        </div>
        <!-- Displays Progress spinner and Error message for service failure-->
        <div *ngIf="showThrobber" style="display: flex; justify-content: center; align-items: center">
          <mat-progress-spinner color="primary" mode="indeterminate">
          </mat-progress-spinner>
        </div>
        <div *ngIf="!(showContent || showThrobber)" layout-align="center center" style="text-align: center;">
          <mat-icon svgIcon="healthcheck_failure_status" [ngStyle]="{color: '#FF8F1C', height: '25px', width: '25px'}">
          </mat-icon>
          Service Failure. Please try again.
        </div>
        
        <div layout layout-align="right" class="rightAlignStyle" *ngIf="dataBacktoTopFlag">
          <a (click)="goToHealthCheckTitle()">
            <mat-icon svgIcon="healthcheck_back_to_top" [ngStyle]="{height: '29px', width: '26px'}">
            </mat-icon>
          </a>
        </div>
  </mat-tab>
  <mat-tab label="Services" class="healthcheck-tab-style"> 
      <div layout layout-align="left" class="sectionHeadingStyle">
          <div layout>Services</div>
        </div>
        
        <div id="servicesTable" layout-align="center center" class="tableContainerStyle" *ngIf="showContent">
          <table mat-table [dataSource]="servicesDataSource" >
            <!-- Server Column -->
            <ng-container matColumnDef="serverName">
              <th mat-header-cell *matHeaderCellDef class="tableHeaderCss">Name</th>
              <td mat-cell *matCellDef="let key" style="width:200px !important"> {{key.serverName}} </td>
            </ng-container>
            <!-- IP Address:Port Column -->
            <ng-container matColumnDef="ipAddress">
              <th mat-header-cell *matHeaderCellDef class="tableHeaderCss">IP Address:Port</th>
              <td mat-cell *matCellDef="let key"> {{key.endPoint}} </td>
            </ng-container>
            <!-- Version Column -->
            <ng-container matColumnDef="version" class="tableHeaderCss">
              <th mat-header-cell *matHeaderCellDef class="tableHeaderCss">Version</th>
              <td mat-cell *matCellDef="let key"> {{key.version}} </td>
            </ng-container>
            <!-- Status Column -->
            <ng-container matColumnDef="status" class="tableHeaderCss">
              <th mat-header-cell *matHeaderCellDef class="tableHeaderCss">Status</th>
              <td mat-cell *matCellDef="let key">
                <mat-icon svgIcon="healthcheck_success_status" *ngIf="key.status =='success'" [ngStyle]="{color: '#00B140', height: '20px', width: '20px'}">
                </mat-icon>
                <mat-icon svgIcon="healthcheck_failure_status" *ngIf="key.status =='failure'" [ngStyle]="{color: '#FF8F1C', height: '20px', width: '20px'}">
                </mat-icon>
              </td>
            </ng-container>
            <!-- Details Column -->
            <ng-container matColumnDef="details">
              <th mat-header-cell *matHeaderCellDef class="tableHeaderCss">Details</th>
              <td mat-cell *matCellDef="let key">
                <a (click)="showDetailsDialog('-',key.serverName)">
                  <mat-icon svgIcon="healthcheck_show_details" [ngStyle]="{color:'#5C068C', height: '20px', width: '20px'}">
                  </mat-icon>
                </a>
              </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="servicesColumns" class="tableHeaderCss"></tr>
            <tr mat-row *matRowDef="let row; columns: servicesColumns;"></tr>
          </table>  
        </div>
        <!-- Displays Progress spinner and Error message for service failure-->
        <div *ngIf="showThrobber" style="display: flex; justify-content: center; align-items: center">
          <mat-progress-spinner color="primary" mode="indeterminate">
          </mat-progress-spinner>
        </div>
        <div *ngIf="!(showContent || showThrobber)" layout-align="center center" style="text-align: center;">
          <mat-icon svgIcon="healthcheck_failure_status" [ngStyle]="{color: '#FF8F1C', height: '25px', width: '25px'}">
          </mat-icon>
          Service Failure. Please try again.
        </div>
        <div layout layout-align="right" class="rightAlignStyle" *ngIf="servicesBacktoTopFlag">
          <a (click)="goToHealthCheckTitle()">
            <mat-icon svgIcon="healthcheck_back_to_top" [ngStyle]="{height: '29px', width: '26px'}">
            </mat-icon>
          </a>
        </div>
  </mat-tab>
</mat-tab-group>








